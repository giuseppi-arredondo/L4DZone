<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>L4DZone</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js" integrity="sha512-jRZUzJKXjV5xj6LVJv+g1bNqC8PjgK6sBWvK0uBfW6Zy0uR0LKfEX7fplZg53Hj+BO6LXQ6I4d6+gqWqPZL5w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- CSS principal -->
    <link rel="stylesheet" href="L4DZone.css" />
    <link rel="stylesheet" href="L4DZone_2.css" />
    <link rel="stylesheet" href="L4DZone_3.css" />
    <style>
        /* MODAL BARRA INTERNA + BOTÓN X FLOTANTE BONITO */
        .modal-nav-bar {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            padding: 12px 16px;
            background: rgba(0, 38, 77, 0.4);
            border-bottom: 1px solid #1f3d5a;
            border-radius: 12px 12px 0 0;
            width: 100%;
            z-index: 5;
        }

        .modal-nav-bar button {
            background: rgba(0, 38, 77, 0.9);
            color: #f5f5f5;
            border: 1px solid rgba(255,255,255,0.1);
            padding: 8px 16px;
            font-family: 'DM Sans', sans-serif;
            font-size: 14px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }
        .modal-nav-bar button:hover {
            background: rgba(0, 38, 77, 1);
            transform: scale(1.05);
        }

        .close-btn {
            position: absolute;
            top: -20px;
            right: -20px;
            background-color: #ff3333;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
            transition: background-color 0.3s ease;
        }
        .close-btn:hover {
            background-color: #ff0000;
        }

        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
            padding: 16px;
            background-color: rgba(0, 38, 77, 0.2);
            border-radius: 0 0 12px 12px;
            scrollbar-width: thin;
            scrollbar-color: #446688 #1a2e45;
        }
        .modal-body::-webkit-scrollbar {
            width: 10px;
        }
        .modal-body::-webkit-scrollbar-track {
            background: #1a2e45;
            border-radius: 8px;
        }
        .modal-body::-webkit-scrollbar-thumb {
            background: #446688;
            border-radius: 8px;
        }
        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #6699cc;
        }
    </style>

</head>
<body>
    <header>
        <div class="logo">
            <span class="site-name">L4D</span>
            <img src="Imagenes/Logo_l4dzone.png" alt="L4DZone Logo" class="logo-img" />
            <span class="site-name">one</span>
        </div>
        <nav id="menu">
            <button type="button" onclick="openModal('faq')">FAQ</button>
            <button type="button" onclick="openModal('rules')">Rules</button>
            <button type="button" onclick="openModal('stats')">Stats</button>
            <button type="button" onclick="openModal('ratings')">Ratings</button>
            <button type="button" onclick="openModal('maps')">Maps</button>
            <button type="button" onclick="openModal('source_bans')">SourceBans</button>
            <button type="button" onclick="openModal('contact_admins')">Contact Admins</button>
        </nav>
        <div class="user-info">
            <p>Visitor</p>
            <button type="button">Login Steam</button>
        </div>
    </header>

    <!-- MODAL CON BARRA INTERNA FIJA -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;" onclick="closeModal()">
        <div class="modal-blur"></div>
        <div class="modal-container narrow" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div class="modal-nav-bar">
                <button onclick="loadSection('faq')">FAQ</button>
                <button onclick="loadSection('rules')">Rules</button>
                <button onclick="loadSection('stats')">Stats</button>
                <button onclick="loadSection('ratings')">Ratings</button>
                <button onclick="loadSection('maps')">Maps</button>
                <button onclick="loadSection('source_bans')">SourceBans</button>
                <button onclick="loadSection('contact_admins')">Contact Admins</button>
            </div>
            <div id="modalBody" class="modal-body">
                <!-- Aquí se cargará el contenido -->
            </div>
        </div>
    </div>

    <section id="music-panel" class="dashboard-card">
        <div class="title-block">
            <div class="panel-title">
                <span class="main-title">Now Playing</span>
                <span class="sub-badge">Shared</span>
            </div>
            <div class="feature-tag">Premium Feature</div>
        </div>

        <div class="search-block">
            <div class="input-wrapper">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                    <path fill="currentColor" d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"/>
                </svg>
            <input id="track-query" placeholder="Search track (e.g., chill, retro)" aria-label="Track search" />
            </div>
            <div class="buttons">
                <button id="search-btn" class="small">Search</button>
                <button id="enable-audio-btn" class="small">Enable Audio</button>
            </div>
        </div>

        <div id="now-playing" class="now-playing hidden">
            <div class="np-info">
            <div><strong>Track:</strong> <span id="np-title">—</span></div>
            <div><strong>Artist:</strong> <span id="np-artist">—</span></div>
            <div><strong>Length:</strong> <span id="np-duration">--:--</span></div>
            </div>
            <div class="np-controls">
                <button id="pause-btn" aria-label="Pause/resume">Pause</button>
                <button id="stop-btn" aria-label="Stop">Stop</button>
            </div>
        </div>
    </section>

        <!-- Activador -->
    <div id="waiting-game-trigger" style="margin-top:8px; font-family: sans-serif;">
    <div style="display:flex; gap:8px; align-items:center;">
        <div style="flex:1; color:#c8dfff;">¿Te aburre esperar? Prueba esto mientras tanto:</div>
        <button id="start-game-btn" style="padding:6px 14px; background: linear-gradient(135deg,#1f3f8f,#2f6fbf); color:#fff; border:none; border-radius:6px; cursor:pointer;">Jugar</button>
    </div>
    </div>

    <!-- Contenedor del juego (oculto hasta activar) -->
    <div id="game-panel" style="margin-top:10px; max-width:500px; position: relative; display:none;">
    <canvas id="waiting-game" width="500" height="120" style="background: rgba(2,12,40,0.9); border:2px solid rgba(60,140,255,0.8); border-radius:8px; display:block;"></canvas>
    <div id="game-info" style="position:absolute; top:6px; left:10px; color:#a0cfff; font-size:12px; font-family: monospace;">
        Score: <span id="score">0</span>
        <span id="game-over" style="margin-left:12px; display:none; color:#ff8080;">Game Over - <button id="restart-btn" style="padding:2px 6px; background:#337ab7; color:#fff; border:none; border-radius:4px; cursor:pointer;">Reiniciar</button></span>
    </div>
    </div>

    <main>
        <div class="main-content">
            <section class="welcome-box">
                <h2>Welcome!</h2>
                <p>What is L4DZone?</p>
                <p>
                    L4DZone is your ideal place for Left 4 Dead 2 gameplay, offering a fair environment with no cheaters, ragequitters, or toxicity. Enjoy balanced matchmaking, the best AntiCheat system by Lalo HLZ, and constant updates for the best gaming experience. Before jumping in, make sure to check out our guides, FAQs, and queue info to get the most out of the action.
                </p>
            </section>
            <section class="updates-box">
                <h2>Latest Updates</h2>
                <p>Stay tuned for upcoming news, including new videos on our YouTube channel, updates, or live streams!</p>
                <div class="youtube-placeholder">YouTube Banner Placeholder</div>
            </section>
            <section class="premium-box">
                <h2>Unlock Premium Features</h2>
                <p>
                    Explore all the exclusive benefits that Premium has to offer. Click here to enhance your gaming experience now!
                </p>
                <button type="button">View Premium Benefits</button>
            </section>
        </div>
        <aside class="side-content">
            <section class="chat-global">
                <h2>Global Chat:</h2>
                <div class="chat-box">
                    <div class="chat-container"></div>
                    <div class="chat-input-wrapper">
                    <textarea class="chat-input" placeholder="Type a message..."></textarea>
                    <button class="chat-submit-btn" type="button">▶</button>
                    </div>
                </div>
                </section>
            </section>
            <section class="players-section">
                <h2>Players:</h2>
                <div class="players-info">
                    <div><h4>Online:</h4><span>0</span></div>
                    <div><h4>In Game:</h4><span>0</span></div>
                    <div><h4>In Waiting:</h4><span>0</span></div>
                </div>
            </section>
        </aside>
        <section class="play-queue-stream-section">
            <div class="play-queue">
                <button class="play-queue-btn">Play Queue</button>
                <div class="waiting-list"></div>
            </div>
            <div class="online-streams">
                <h2>Online Streamers:</h2>
                <div class="stream-content"></div>
            </div>
        </section>
    </main>

    <!-- Script principal -->
    <script src="L4DZone.js"></script>
    <script>
    function loadSection(section) {
        const modalBody = document.getElementById("modalBody");

        // Elimina CSS y JS anteriores
        document.querySelectorAll('[data-dynamic-css]').forEach(el => el.remove());
        document.querySelectorAll('[data-dynamic-js]').forEach(el => el.remove());

        // Carga el contenido del modal
        fetch(`Barra_Superior/${section}.html`)
            .then(response => {
                if (!response.ok) throw new Error("No se pudo cargar el archivo.");
                return response.text();
            })
            .then(html => {
                modalBody.innerHTML = html;

                // Cargar CSS dinámico
                const css = document.createElement("link");
                css.rel = "stylesheet";
                css.href = `Barra_Superior/${section}.css`;
                css.setAttribute("data-dynamic-css", "true");
                document.head.appendChild(css);

                // Cargar JS dinámico
                const js = document.createElement("script");
                js.src = `Barra_Superior/${section}.js`;
                js.defer = true;
                js.setAttribute("data-dynamic-js", "true");
                document.body.appendChild(js);
            })
            .catch(error => {
                modalBody.innerHTML = "<p>Error al cargar el contenido.</p>";
                console.error("Error cargando sección:", error);
            });
    }

    function openModal(section) {
        document.getElementById("modalOverlay").style.display = "flex";
        loadSection(section);
    }

    function closeModal() {
        const modal = document.getElementById("modalOverlay");
        const modalBody = document.getElementById("modalBody");
        modal.style.display = "none";
        modalBody.innerHTML = "";

        // Elimina cualquier CSS y JS cargado dinámicamente
        document.querySelectorAll('[data-dynamic-css]').forEach(el => el.remove());
        document.querySelectorAll('[data-dynamic-js]').forEach(el => el.remove());
    }
</script>
</body>
</html>